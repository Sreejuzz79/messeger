@model MessangerWeb.Models.Student

@{
    ViewData["Title"] = "Edit Student";
}

<style>
    body {
        background-color: lightblue;
    }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            z-index: -1;
        }

    .edit-container {
        max-width: 800px;
        margin: 30px auto;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        padding: 30px;
    }

    .page-header {
        text-align: center;
        margin-bottom: 30px;
    }

        .page-header h2 {
            color: #667eea;
            font-weight: 600;
            margin: 0;
        }
</style>

<div class="edit-container">
    <div class="page-header"><h2>Edit Student</h2></div>

    @if (TempData["PopupMessage"] != null)
    {
        <div class="alert alert-success">@TempData["PopupMessage"]</div>
    }

    <form asp-action="Edit" asp-controller="Student" method="post" enctype="multipart/form-data">
        <input type="hidden" asp-for="Id" />

        <!-- Basic Details -->
        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="FirstName" class="form-label">First Name</label>
                <input asp-for="FirstName" class="form-control" />
            </div>
            <div class="col-md-6 mb-3">
                <label asp-for="LastName" class="form-label">Last Name</label>
                <input asp-for="LastName" class="form-control" />
            </div>
        </div>

        <!-- Gender and DOB -->
        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="Gender">Gender</label>
                <select asp-for="Gender" class="form-select">
                    <option value="">Select Gender</option>
                    @foreach (var g in ViewBag.Genders)
                    {
                        <option value="@g" selected="@(Model.Gender == g)">@g</option>
                    }
                </select>
            </div>
            <div class="col-md-6 mb-3">
                <label asp-for="DateOfBirth">Date of Birth</label>
                <input asp-for="DateOfBirth" type="date" class="form-control" />
            </div>
        </div>

        <!-- Contact Info -->
        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="Email">Email</label>
                <input asp-for="Email" class="form-control" />
            </div>
            <div class="col-md-6 mb-3">
                <label asp-for="Phone">Phone</label>
                <input asp-for="Phone" class="form-control" />
            </div>
        </div>

        <!-- Education & Status -->
        <div class="row">
            <div class="col-md-6 mb-3">
                <label asp-for="Education">Education</label>
                <select asp-for="Education" class="form-select">
                    <option value="">Select Qualification</option>
                    @foreach (var q in ViewBag.Qualifications)
                    {
                        <option value="@q" selected="@(Model.Education == q)">@q</option>
                    }
                </select>
            </div>
            <div class="col-md-6 mb-3">
                <label asp-for="Status">Status</label>
                <select asp-for="Status" class="form-select">
                    @foreach (var s in ViewBag.Statuses)
                    {
                        <option value="@s" selected="@(Model.Status == s)">@s</option>
                    }
                </select>
            </div>
        </div>

        <!-- Hobbies -->
        <div class="mb-3">
            <label class="form-label">Hobbies</label>
            <div class="d-flex flex-wrap gap-2">
                @foreach (var h in ViewBag.Hobbies)
                {
                    <div>
                        <input type="checkbox" name="SelectedHobbies" value="@h"
                               @(Model.SelectedHobbies != null && Model.SelectedHobbies.Contains(h) ? "checked" : "") /> @h
                    </div>
                }
            </div>
        </div>

        <!-- Photo -->
        <div class="mb-3">
            <label>Photo</label>
            @if (Model.Photo != null)
            {
                var base64 = Convert.ToBase64String(Model.Photo);
                <img src="data:image/png;base64,@base64" width="120" class="d-block mb-2 rounded" />
            }
            <input type="file" name="PhotoFile" class="form-control" />
        </div>

        <!-- Password -->
        <div class="mb-3">
            <label>Password</label>
            <input type="password" name="Password" class="form-control" value="********" />
            <small class="text-muted">Leave as "********" to keep current password</small>
        </div>

        <!-- Address -->
        <div class="row">
            <div class="col-md-6 mb-3"><label asp-for="Country">Country</label><input asp-for="Country" class="form-control" /></div>
            <div class="col-md-6 mb-3"><label asp-for="State">State</label><input asp-for="State" class="form-control" /></div>
            <div class="col-md-6 mb-3"><label asp-for="City">City</label><input asp-for="City" class="form-control" /></div>
            <div class="col-md-6 mb-3"><label asp-for="PostalCode">Postal Code</label><input asp-for="PostalCode" class="form-control" /></div>
        </div>

        <div class="mb-3">
            <label asp-for="Address">Address</label>
            <textarea asp-for="Address" class="form-control" rows="2"></textarea>
        </div>

        <button type="submit" class="btn btn-primary w-100">Update</button>
    </form>
</div>
